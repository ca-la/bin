-- Design IDs from https://docs.google.com/spreadsheets/d/1Vn_3qOnVIxs8pIBdftREwoYzXNGLTaX_Sow-Oh0RheQ/edit?usp=drive_web

with to_update as (select * from (values
  ('b570fc90-16a0-43e4-ae6e-42415cdb8e38', '11/30/2020'),
  ('5992c488-bf75-4a68-a3ef-37fc8e7210e1', '2/10/2021'),
  ('89da6af0-8f47-4f25-b101-fa6bc436a1dd', '1/15/2021'),
  ('80ba39cd-b6eb-449d-9e21-7b59cf581583', '11/15/2020'),
  ('bddf9aea-582f-48fc-a5fd-9cb8d7313675', '9/14/2020'),
  ('b68e312b-705c-4682-9706-430986243e8a', '11/10/2020'),
  ('7336fe6a-de0f-4519-a33c-adf47d5b8f7a', '11/24/2020'),
  ('1e7b7724-1535-4a80-9e66-590203e60838', '11/21/2020'),
  ('9bfd302b-ee0c-4de9-83fa-922cd695dda5', '11/21/2020'),
  ('8a88d91a-cbd9-47aa-8dcf-ee4c1dee9b8f', '9/15/2020'),
  ('73fb8e41-dfd9-46af-bf6c-b7bc4b530f4b', '11/30/2020'),
  ('fdad3ea6-e067-4fbe-aa08-78438ed12b80', '9/11/2020'),
  ('885b3251-3e4d-4827-a30d-ce6ac39fd77b', '8/8/2020'),
  ('153b8a59-1698-4823-8a77-c7098d9a4aa3', '11/15/2020'),
  ('67d6dff8-54a9-44cf-a888-ad761eab83b4', '12/16/2020'),
  ('90cdb84b-9e46-4416-8d3d-570538498ecf', '12/16/2020'),
  ('26e572f2-5119-40b2-a8c5-998b5a65119f', '11/30/2020'),
  ('8cd277ba-f304-4239-ba73-04d164b74633', '11/19/2020'),
  ('eb4c2cc4-0e5f-49db-a772-7c73f3f1eaf2', '10/31/2020'),
  ('72a34d08-ff2e-4136-98f7-bbecf88f018b', '4/20/2020'),
  ('35c19ca9-da66-4563-8adf-c8dc40542f40', '10/30/2020'),
  ('01d73716-9258-476b-9eef-9436335a2e97', '10/1/2020'),
  ('237cc903-f9e7-4bff-bb74-60a0350ea74d', '11/30/2020'),
  ('b8b20264-6106-4a08-b3da-b5101793af02', '11/30/2020'),
  ('8be956d0-33db-457f-aabe-b80e481dce48', '6/1/2020'),
  ('69d7a638-615a-42a4-a80c-7538424b5a93', '8/11/2020'),
  ('322db226-d980-47b2-a21d-4be65400eb50', '4/23/2020'),
  ('d9accc29-6ec6-4f6e-98e0-5ef40dd86e8b', '4/23/2020'),
  ('14e4ad98-5f45-4258-8659-1f71a7d4e7ff', '4/23/2020'),
  ('184bc3c4-ea60-46ce-903f-4dad0f9dd8e7', '4/23/2020'),
  ('f17f381f-4b8d-48ca-8e13-e1f56326a370', '4/23/2020'),
  ('70ec966a-562a-4da6-8254-96323f75828f', '5/21/2020'),
  ('9fdae1d2-8aee-4322-a48c-2936205f3385', '4/23/2020'),
  ('9fdae1d2-8aee-4322-a48c-2936205f3385', '4/23/2020'),
  ('9fdae1d2-8aee-4322-a48c-2936205f3385', '4/23/2020'),
  ('9959d6ab-b202-40df-ad07-311102b83acb', '5/21/2020'),
  ('6a2fcdc3-64d5-4c98-aca9-b4a1e8b0ae83', '5/21/2020'),
  ('2a56a320-b33d-4c2e-9c21-c948e7d1a3dd', '4/23/2020'),
  ('4b5e7ea2-6186-4a78-ae33-238493de7b80', '4/23/2020'),
  ('a46870c4-beff-462a-9141-76668d78cb29', '4/23/2020'),
  ('6dcc9ad6-7736-4e2b-9f8c-3cd6de7ee298', '4/23/2020'),
  ('5ad890f7-3c8b-4a4b-bacf-b541872c2bd3', '5/21/2020'),
  ('89d597ff-6c04-43e3-b4ba-d6f5916204c6', '4/23/2020'),
  ('9fdcb843-a498-494a-ba15-ece294472954', '5/21/2020'),
  ('aef44390-a57a-41e8-b4a3-6150741d4f37', '5/21/2020'),
  ('c8163c5d-385d-4148-9934-e8fc848c4a01', '5/21/2020'),
  ('7286dde1-8ecd-4338-b3d0-0d7e15c31242', '5/21/2020'),
  ('74a5ab90-c2bc-4c3c-9a9f-d3648b6f1856', '5/21/2020'),
  ('f5ba46ef-2690-4e0e-93fa-476aee18de5f', '5/21/2020'),
  ('78df863e-d519-4843-9f00-ca6164a862a4', '5/21/2020'),
  ('dcf7eb6b-52dc-4ab0-8918-19d4851f432e', '5/21/2020'),
  ('4fa7ac26-146b-4b7a-b67a-08a7a7f686b2', '5/21/2020'),
  ('57bae6b3-e10f-4190-b8d3-c80dbd27e1e7', '8/15/2020'),
  ('73e46af3-8e10-49cf-b58f-d2f3292accb7', '6/9/2020'),
  ('77311d70-5903-4166-b1d5-188407e9159b', '6/9/2020'),
  ('8e8e5a0b-05ff-4811-95e4-186465b8547e', '6/9/2020'),
  ('c8a28d5f-d278-409b-adf4-4cbd149cbc52', '6/9/2020'),
  ('da588b40-54f2-4d6f-836c-0e1c287d5531', '7/15/2020'),
  ('6191a5a1-c9de-40c5-951e-f53035370cff', '10/1/2020'),
  ('318ebd6a-8315-418c-9122-52166b2f0a4f', '9/15/2020')
) as t (design_id, completed_at))
update
  design_approval_steps as steps
set
  started_at = coalesce(steps.started_at, to_update.completed_at::timestamp),
  completed_at = to_update.completed_at::timestamp,
  state = 'COMPLETED',
  reason = null
from to_update
where steps.design_id = to_update.design_id::uuid
and steps.completed_at is null;
