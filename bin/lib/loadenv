#!/bin/bash

# Load environment variables from .env or Heroku config

function loadenv() {
  set -o allexport
  eval $($@ | xargs -d '\n')
  set +o allexport
}

function loadenv_local() {
  loadenv "cat .env"
}

function loadenv_test() {
  loadenv_local
  loadenv "cat .test.env"
}

function loadenv_heroku() {
  set -o allexport
  eval $(heroku config -s -a $1 | xargs -d '\n')
  DATABASE_URL=$(heroku config:get DATABASE_URL -a $1)?ssl=true
  set +o allexport
}

function loadenv_stg() {
  loadenv_heroku cala-api-stg
}

function loadenv_prod() {
  loadenv_heroku cala-api-prod
}

function loadenv_demo() {
  loadenv_heroku cala-api-demo
}
