#!/bin/bash
set -e

# Purges all unsent/unread notifications
# Usage: bin/purge-notifications <local|staging|production|demo>

source bin/lib/loadenv

host=${1:-""}

case "$host" in
  local)
    loadenv-local
    npx ts-node src/workers/purge-notifications/index.ts
    ;;
  staging|production|demo)
    node dist/workers/purge-notifications/index.js
    ;;
  *)
    echo 'Usage: bin/purge-notifications <local|staging|production|demo>'
    exit 1
    ;;
esac
