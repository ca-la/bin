#!/bin/bash

set -o errexit
set -o nounset
set -o pipefail
set -o noglob

# Run JS or TS script in environment
# Usage: bin/run <local|staging|production|demo> <path-to-script>

main() {
  source bin/lib/loadenv

  host=${1:-""}
  shift

  case "$host" in
    local)
      loadenv_local
      ;;
    staging)
      loadenv_stg
      ;;
    production)
      loadenv_prod
      ;;
    demo)
      loadenv_demo
      ;;
    *)
      echo 'Usage: bin/run <local|staging|production|demo> <path-to-script>'
      exit 1
      ;;
  esac

  npx ts-node "$@"
}

main "$@"
